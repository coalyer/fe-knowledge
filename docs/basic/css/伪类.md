# 伪类

## input hover,focus 伪类特效

**CSS 伪类：**

可以控制文本框特效，使用:focus,:hover”等伪类特效

1. :focus 选择器用于选取获得焦点的元素。

2. :hover 选择器用于选择鼠标指针浮动在上面的元素。

**CSS 属性：**

overflow 属性规定当内容溢出元素框时发生的事情。

**英语：**

- focus [ˈfəʊkəs] 集中(注意力、精力等于);

- hover [ˈhɒvə(r)] 翱翔; 盘旋;
- overflow [ˌəʊvəˈfləʊ] 漫出; 溢出;

![1](/basic/css/1.jpg)

::: run {title:"锚点",row:true,reverse:true}

```html
<template>
  <div>
    <input type="text" style="width:200px;" class="txt" />
    <input type="button" value="搜索" class="button" />
  </div>
</template>
<style>
  button::-moz-focus-inner,
  input[type='button']::-moz-focus-inner {
    border: none;
    padding: 0;
  }
  input {
    vertical-align: middle;
    line-height: normal;
  }

  .txt {
    background: #fff;
    border: 1px solid #9a9a9a;
    border-right: 1px solid #cdcdcd;
    border-bottom: 1px solid #cdcdcd;
    height: 17px;
    line-height: 17px;
    overflow: visible;
    padding: 4px;
    margin-right: 5px;
  }
  .txt:hover,
  .txt:focus {
    background: #fff;
    background:linear-gradient
    border: 1px solid #999;
  }

  .button {
    background: #fff; /* Old browsers */
    background: -moz-linear-gradient(top, #fff 0%, #dedede 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fff), color-stop(100%, #dedede)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fff 0%, #dedede 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fff 0%, #dedede 100%); /* Opera11.10+ */
    background: -ms-linear-gradient(top, #fff 0%, #dedede 100%); /* IE10+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fff', endColorstr='#dedede',GradientType=0 ); /* IE6-9 */
    background: linear-gradient(top, #fff 0%, #dedede 100%); /* W3C */
    border: 1px solid #ccc;
    color: #777;
    font: 12px/17px Arial, Tahoma, Verdana, sans-serif;
    padding: 4px 15px;
    cursor: pointer;
    overflow: visible;
    border-radius: 4px 4px 4px 4px;
  }
  .button:hover,
  .button:focus {
    background: #fff; /* Old browsers */
    background: -moz-linear-gradient(top, #fff 0%, #ccc 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #fff), color-stop(100%, #ccc)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #fff 0%, #ccc 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top, #fff 0%, #ccc 100%); /* Opera11.10+ */
    background: -ms-linear-gradient(top, #fff 0%, #ccc 100%); /* IE10+ */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fff', endColorstr='#ccc',GradientType=0 ); /* IE6-9 */
    background: linear-gradient(top, #fff 0%, #ccc 100%); /* W3C */
    border: 1px solid #aaa;
  }
</style>
```

:::

## 层叠水平（stacking level)

按照 [W3 官方](https://www.w3.org/TR/CSS2/visuren.html#propdef-z-index) 的说法，准确的 7 层为：

1. 形成堆叠上下文环境的元素的背景与边框
2. 拥有负 z-index 的子堆叠上下文元素 （负的越高越堆叠层级越低）
3. 正常流式布局，非 inline-block，无 position 定位（static 除外）的子元素
4. 无 position 定位（static 除外）的 float 浮动元素
5. 正常流式布局， inline-block 元素，无 position 定位（static 除外）的子元素（包括 display:table 和 display:inline ）
6. 拥有 z-index:0 的子堆叠上下文元素
7. 拥有正 z-index: 的子堆叠上下文元素（正的越低越堆叠层级越低）

![stacking-level](/basic/css/stacking-level.png)

### inline-block 在 float 之上

无论顺序如何，始终是 `display:inline-block` 的 `div` 叠在上方，即 5 在 4 之上。

::: run {title:"inline-block 在 float 之上",row:true,reverse:true}

```html
<template>
  <div>
    <div class="container">
      <div class="inline-block">#divA display:inline-block</div>
      <div class="float">#divB float:left</div>
    </div>
  </div>
</template>
<style>
  .container {
    position: relative;
    background: #ddd;
  }
  .container > div {
    width: 200px;
    height: 200px;
  }
  .float {
    float: left;
    background-color: deeppink;
  }
  .inline-block {
    display: inline-block;
    background-color: yellowgreen;
    margin-left: -100px;
  }
</style>
```

:::

注意，上面的比较是基于两个 `div` 都没有形成 `堆叠上下文` 这个为基础的。

## 堆叠上下文（stacking context）

堆叠上下文是 HTML 元素的三维概念。众 HTML 元素基于其元素属性**按照优先级顺序**占据这个空间。

### 如何触发一个元素形成 `堆叠上下文` ？方法如下，摘自 [MDN](https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context)：

- 根元素 (HTML),
- z-index 值不为 "auto"的 绝对/相对定位，
- 一个 z-index 值不为 "auto"的 flex 项目 (flex item)，**即：父元素 display: flex|inline-flex**，
- **opacity** 属性值小于 1 的元素（参考 the specification for opacity），
- transform 属性值不为 "none"的元素，
- mix-blend-mode 属性值不为 "normal"的元素，
- filter 值不为“none”的元素，
- perspective 值不为“none”的元素，
- isolation 属性被设置为 "isolate"的元素，
- position: fixed
- 在 will-change 中指定了任意 CSS 属性，即便你没有直接指定这些属性的值
- -webkit-overflow-scrolling 属性被设置 "touch"的元素

`inline-block` 的 `div` 不再一定叠在 `float` 的 `div` 之上，而是和 HTML 代码中 DOM 的堆放顺序有关，**后添加的 div 会 叠在先添加的 div 之上**。

::: run {title:"锚点",row:true,reverse:true}

```html
<template>
  <div>
    <div class="container">
      <div class="float">#divB float:left</div>
      <div class="inline-block">#divA display:inline-block</div>
    </div>
  </div>
</template>
<style>
  .container {
    position: relative;
    background: #ddd;
  }
  .container > div {
    width: 200px;
    height: 200px;
    opacity: 0.9; // 注意这里，增加一个 opacity
  }
  .float {
    float: left;
    background-color: deeppink;
  }
  .inline-block {
    display: inline-block;
    background-color: yellowgreen;
    margin-left: -100px;
  }
</style>
```

:::
